{% extends "novel/layout.html" %}
{% load static %}

{% block title %}
  Genesis | {{user.username}}
{% endblock %}

{% block body %}
<div>
  <a href="{% url 'index'%}">Genesis</a> >> <span>{{user.username}}</span>
</div>
<hr>
<h1 style="text-align: center;">{{user.username}}</h1>

<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'details')" id="defaultOpen">Details</button>
  <button class="tablinks" onclick="openCity(event, 'novels')">Novels</button>

  <button class="tablinks" onclick="openCity(event, 'chapters')">Chapters</button>
  <button class="tablinks" onclick="openCity(event, 'comments')">Comments ({{novel.comments}})</button>
</div>

<div id="details" class="tabcontent">
  <div>
    <p>Member since: {{user.date_joined}}</p>
    <p>Number of novels: {{novels|length}}</p>
    <p>Number of comments: {{comments_count}}</p>
    {% if is_own_profile %}
      <a href="{% url 'edit_profile' %}"> Edit Profile</a>
    {% endif %}
  </div>
</div>

<div id="novels" class="tabcontent">
  {% for novel in novels %}
    <div style="border: 1px solid white; border-radius: 15px; padding: 1rem; margin-bottom: 1rem; background-color: #1e1e1e; display: flex; flex-direction: column; gap: 1rem;">
      <div style="display: flex;">
        <a href="{% url 'novel' id=novel.id %}" class="index-image">
          <img src="{{novel.image}}" class="img-responsive item-img lazy img-fluid cover" />
        </a>
        <div style="float: none">
          <a href="{% url 'novel' id=novel.id %}">
            <h4>{{novel.title}}</h4>
          </a>
          <div class="desc-text">{{novel.description | safe }}</div>
        </div>
      </div>
      <div>
        
      </div>

      <div style="border: 1px solid white; border: 15px; margin-top: 1rem; display: flex; justify-content: space-between; align-items: center;">
        
        <a href="{% url 'novel' id=novel.id %}" style="color: white;">
          <button class="btn btn-primary btn-sm" style="border-radius: 15px;">
          Read
          </button>
        </a>

        <a href="{% url 'novel' id=novel.id%}#comments-view" style="display: flex; align-items: center; gap: 0.25rem;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat" viewBox="0 0 16 16">
            <path d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"/>
          </svg>
          <span>{{novel.comments}}</span>
        </a>
      </div>
    </div>
  {% endfor %}
</div>
<script src="{% static 'novel/tabs.js' %}"></script>


{% endblock %}
